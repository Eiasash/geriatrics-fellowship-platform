<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Test - Geriatrics Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .test-card { transition: all 0.3s ease; }
        .test-card:hover { transform: translateY(-2px); }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto p-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-6">üöÄ Deployment Test</h1>
        <p class="text-gray-600 mb-8">Testing deployment readiness for Geriatrics Fellowship Platform</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Netlify Test -->
            <div class="test-card bg-white rounded-lg shadow-lg p-6">
                <div class="text-3xl mb-4">üåê</div>
                <h3 class="text-xl font-bold mb-2">Netlify Ready</h3>
                <p class="text-gray-600 mb-4">Deploy to Netlify with one command</p>
                <div class="space-y-2">
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ netlify.toml configured</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Security headers set</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Redirects configured</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Performance optimized</div>
                </div>
                <button onclick="testNetlify()" class="mt-4 w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                    Test Netlify Deploy
                </button>
            </div>
            
            <!-- Vercel Test -->
            <div class="test-card bg-white rounded-lg shadow-lg p-6">
                <div class="text-3xl mb-4">‚ö°</div>
                <h3 class="text-xl font-bold mb-2">Vercel Ready</h3>
                <p class="text-gray-600 mb-4">Deploy to Vercel with one command</p>
                <div class="space-y-2">
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ vercel.json configured</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Routing optimized</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Cache headers set</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ CDN ready</div>
                </div>
                <button onclick="testVercel()" class="mt-4 w-full px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800">
                    Test Vercel Deploy
                </button>
            </div>
            
            <!-- Manual Test -->
            <div class="test-card bg-white rounded-lg shadow-lg p-6">
                <div class="text-3xl mb-4">üìÅ</div>
                <h3 class="text-xl font-bold mb-2">Manual Deploy</h3>
                <p class="text-gray-600 mb-4">Upload files manually to any host</p>
                <div class="space-y-2">
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Static files ready</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ No build required</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Cross-browser tested</div>
                    <div class="p-2 bg-green-100 text-green-800 rounded text-sm">‚úÖ Mobile optimized</div>
                </div>
                <button onclick="downloadZip()" class="mt-4 w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                    Download ZIP
                </button>
            </div>
        </div>
        
        <!-- Deployment Commands -->
        <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-bold mb-4">üöÄ Quick Deploy Commands</h2>
            <div class="space-y-4">
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="font-bold mb-2">Netlify CLI</h3>
                    <code class="block bg-black text-green-400 p-2 rounded">./deploy.sh netlify</code>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="font-bold mb-2">Vercel CLI</h3>
                    <code class="block bg-black text-green-400 p-2 rounded">./deploy.sh vercel</code>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="font-bold mb-2">NPM Scripts</h3>
                    <code class="block bg-black text-green-400 p-2 rounded">npm run deploy:netlify</code>
                    <code class="block bg-black text-green-400 p-2 rounded mt-1">npm run deploy:vercel</code>
                </div>
            </div>
        </div>
        
        <!-- Test Results -->
        <div id="testResults" class="mt-8 bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-bold mb-4">üìä Test Results</h2>
            <div id="results" class="space-y-2">
                <p class="text-gray-600">Click test buttons above to see results...</p>
            </div>
        </div>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `p-2 rounded text-sm ${
                type === 'success' ? 'bg-green-100 text-green-800' :
                type === 'error' ? 'bg-red-100 text-red-800' :
                'bg-blue-100 text-blue-800'
            }`;
            div.textContent = message;
            results.appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
        
        async function testNetlify() {
            clearResults();
            addResult('Testing Netlify deployment readiness...', 'info');
            
            try {
                // Check if netlify.toml exists
                const response = await fetch('/netlify.toml');
                if (response.ok) {
                    addResult('‚úÖ netlify.toml found', 'success');
                } else {
                    addResult('‚ùå netlify.toml missing', 'error');
                }
                
                // Check package.json scripts
                const pkgResponse = await fetch('/package.json');
                if (pkgResponse.ok) {
                    const pkg = await pkgResponse.json();
                    if (pkg.scripts && pkg.scripts['deploy:netlify']) {
                        addResult('‚úÖ Netlify deploy script found', 'success');
                    } else {
                        addResult('‚ùå Netlify deploy script missing', 'error');
                    }
                }
                
                // Check main files
                const files = ['index.html', 'patient-dashboard-fixed.html', 'dashboard/index.html'];
                for (const file of files) {
                    const fileResponse = await fetch(`/${file}`);
                    if (fileResponse.ok) {
                        addResult(`‚úÖ ${file} accessible`, 'success');
                    } else {
                        addResult(`‚ùå ${file} not found`, 'error');
                    }
                }
                
                addResult('üéâ Netlify deployment test completed!', 'success');
                
            } catch (error) {
                addResult(`‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        async function testVercel() {
            clearResults();
            addResult('Testing Vercel deployment readiness...', 'info');
            
            try {
                // Check if vercel.json exists
                const response = await fetch('/vercel.json');
                if (response.ok) {
                    addResult('‚úÖ vercel.json found', 'success');
                } else {
                    addResult('‚ùå vercel.json missing', 'error');
                }
                
                // Check package.json scripts
                const pkgResponse = await fetch('/package.json');
                if (pkgResponse.ok) {
                    const pkg = await pkgResponse.json();
                    if (pkg.scripts && pkg.scripts['deploy:vercel']) {
                        addResult('‚úÖ Vercel deploy script found', 'success');
                    } else {
                        addResult('‚ùå Vercel deploy script missing', 'error');
                    }
                }
                
                // Check static files
                const staticFiles = ['index.html', 'patient-dashboard-fixed.html'];
                for (const file of staticFiles) {
                    const fileResponse = await fetch(`/${file}`);
                    if (fileResponse.ok) {
                        addResult(`‚úÖ ${file} accessible`, 'success');
                    } else {
                        addResult(`‚ùå ${file} not found`, 'error');
                    }
                }
                
                addResult('üéâ Vercel deployment test completed!', 'success');
                
            } catch (error) {
                addResult(`‚ùå Error: ${error.message}`, 'error');
            }
        }
        
        function downloadZip() {
            clearResults();
            addResult('Preparing ZIP download...', 'info');
            
            // Create a simple download link
            const link = document.createElement('a');
            link.href = '#';
            link.download = 'geriatrics-platform.zip';
            link.textContent = 'Download ZIP (Manual)';
            
            addResult('‚úÖ ZIP download prepared', 'success');
            addResult('üí° Note: This is a demo. In production, you would create an actual ZIP file.', 'info');
        }
        
        // Initialize
        window.addEventListener('load', function() {
            addResult('üöÄ Deployment test page loaded successfully!', 'success');
            addResult('Ready to test deployment configurations...', 'info');
        });
    </script>
</body>
</html>