<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drug Interaction Checker - Geriatrics Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .interaction-severe { background: linear-gradient(135deg, #fee2e2, #fecaca); }
        .interaction-moderate { background: linear-gradient(135deg, #fef3c7, #fde68a); }
        .interaction-minor { background: linear-gradient(135deg, #dbeafe, #bfdbfe); }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto p-6">
        <!-- Header -->
        <header class="flex justify-between items-center mb-6">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">üíä Drug Interaction Checker</h1>
                <p class="text-gray-600">Check for potential medication interactions in elderly patients</p>
            </div>
            <button onclick="window.location.href='index.html'" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
                üè† Home
            </button>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Medication Input -->
            <div class="bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-semibold mb-4">Enter Medications</h2>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Search & Add Medication</label>
                    <div class="flex gap-2">
                        <input type="text" id="drugSearch" placeholder="Type medication name..." 
                            class="flex-1 p-2 border border-gray-300 rounded-lg"
                            onkeyup="searchDrugs(event)">
                        <button onclick="addCustomDrug()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                            + Add
                        </button>
                    </div>
                    <div id="searchResults" class="mt-2 max-h-40 overflow-y-auto"></div>
                </div>

                <div class="mb-4">
                    <h3 class="font-semibold mb-2">Current Medications:</h3>
                    <div id="medicationList" class="space-y-2">
                        <p class="text-gray-500 text-sm">No medications added yet</p>
                    </div>
                </div>

                <button onclick="checkInteractions()" class="w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                    üîç Check Interactions
                </button>

                <div class="mt-4 p-4 bg-yellow-50 rounded-lg">
                    <h4 class="font-semibold text-yellow-800 mb-2">‚ö†Ô∏è Important Notes:</h4>
                    <ul class="text-sm text-yellow-700 space-y-1">
                        <li>‚Ä¢ This tool provides general guidance only</li>
                        <li>‚Ä¢ Always verify with clinical references</li>
                        <li>‚Ä¢ Consider patient-specific factors</li>
                        <li>‚Ä¢ Elderly patients may have altered pharmacokinetics</li>
                    </ul>
                </div>
            </div>

            <!-- Interaction Results -->
            <div class="bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-semibold mb-4">Interaction Analysis</h2>
                
                <div id="interactionResults">
                    <div class="text-center py-8 text-gray-500">
                        <div class="text-5xl mb-3">üî¨</div>
                        <p>Add medications and click "Check Interactions" to see results</p>
                    </div>
                </div>

                <!-- Common Interactions Reference -->
                <div class="mt-6">
                    <h3 class="font-semibold mb-3">üìö Common Geriatric Drug Interactions</h3>
                    <div class="space-y-2 text-sm">
                        <div class="p-3 bg-red-50 rounded-lg">
                            <strong class="text-red-900">Warfarin + NSAIDs:</strong>
                            <span class="text-red-700"> Increased bleeding risk</span>
                        </div>
                        <div class="p-3 bg-yellow-50 rounded-lg">
                            <strong class="text-yellow-900">ACE-I + Spironolactone:</strong>
                            <span class="text-yellow-700"> Hyperkalemia risk</span>
                        </div>
                        <div class="p-3 bg-yellow-50 rounded-lg">
                            <strong class="text-yellow-900">Digoxin + Amiodarone:</strong>
                            <span class="text-yellow-700"> Digoxin toxicity</span>
                        </div>
                        <div class="p-3 bg-blue-50 rounded-lg">
                            <strong class="text-blue-900">Statins + Fibrates:</strong>
                            <span class="text-blue-700"> Myopathy risk</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Drug Classes Reference -->
        <div class="mt-6 bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-semibold mb-4">üè∑Ô∏è High-Risk Drug Classes in Elderly</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <h3 class="font-semibold text-red-600 mb-2">Avoid/Use with Caution</h3>
                    <ul class="text-sm space-y-1">
                        <li>‚Ä¢ Benzodiazepines (fall risk)</li>
                        <li>‚Ä¢ Anticholinergics (confusion)</li>
                        <li>‚Ä¢ NSAIDs (renal, GI, CV risk)</li>
                        <li>‚Ä¢ First-gen antipsychotics</li>
                        <li>‚Ä¢ Tricyclic antidepressants</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-yellow-600 mb-2">Requires Dose Adjustment</h3>
                    <ul class="text-sm space-y-1">
                        <li>‚Ä¢ Direct oral anticoagulants</li>
                        <li>‚Ä¢ Gabapentin/Pregabalin</li>
                        <li>‚Ä¢ Metformin (if eGFR <45)</li>
                        <li>‚Ä¢ Most antibiotics</li>
                        <li>‚Ä¢ H2 blockers</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-green-600 mb-2">Generally Safe</h3>
                    <ul class="text-sm space-y-1">
                        <li>‚Ä¢ ACE inhibitors/ARBs</li>
                        <li>‚Ä¢ Selective beta-blockers</li>
                        <li>‚Ä¢ SSRIs (except paroxetine)</li>
                        <li>‚Ä¢ Acetaminophen</li>
                        <li>‚Ä¢ PPIs (short-term)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Enhanced Geriatric Drug Reference Table -->
        <div class="mt-6 bg-white rounded-lg shadow p-6">
            <style>
                .drug-table {
                    width: 100%;
                    border-collapse: collapse;
                    margin: 20px 0;
                }
                .drug-table th {
                    background: #f0f4f8;
                    padding: 12px;
                    text-align: left;
                    border-bottom: 2px solid #4a5568;
                    font-weight: 600;
                }
                .drug-table td {
                    padding: 10px;
                    border-bottom: 1px solid #e2e8f0;
                }
                .beers-flag {
                    background: #fed7d7;
                    color: #c53030;
                    padding: 2px 6px;
                    border-radius: 4px;
                    font-size: 0.85em;
                    font-weight: bold;
                }
                .acb-score {
                    background: #feebc8;
                    color: #c05621;
                    padding: 2px 6px;
                    border-radius: 4px;
                    font-size: 0.85em;
                }
                .safe-tag {
                    background: #c6f6d5;
                    color: #22543d;
                    padding: 2px 6px;
                    border-radius: 4px;
                    font-size: 0.85em;
                }
            </style>

            <h3 class="text-xl font-semibold mb-4">üìä Comprehensive Geriatric Drug Reference</h3>
            <input type="text" id="drugFilter" placeholder="Search drugs..." style="width: 100%; padding: 8px; margin-bottom: 10px;" class="border border-gray-300 rounded-lg">

            <table class="drug-table">
                <thead>
                    <tr>
                        <th>Drug</th>
                        <th>Class</th>
                        <th>Geriatric Dose</th>
                        <th>Key Interactions</th>
                        <th>Renal Adjust</th>
                        <th>Warnings</th>
                    </tr>
                </thead>
                <tbody id="drugTableBody">
                    <!-- DOACs -->
                    <tr>
                        <td><strong>Apixaban</strong></td>
                        <td>DOAC</td>
                        <td>5mg BID<br><small>‚Üì2.5mg if 2 of: Age‚â•80, Wt‚â§60kg, Cr‚â•1.5</small></td>
                        <td>Ketoconazole, Ritonavir</td>
                        <td>See dosing criteria</td>
                        <td><span class="safe-tag">Preferred in elderly</span></td>
                    </tr>
                    <tr>
                        <td><strong>Rivaroxaban</strong></td>
                        <td>DOAC</td>
                        <td>20mg daily with food<br><small>15mg if CrCl 15-50</small></td>
                        <td>CYP3A4 inhibitors</td>
                        <td>15mg if CrCl<50</td>
                        <td>Take with largest meal</td>
                    </tr>
                    <tr>
                        <td><strong>Dabigatran</strong></td>
                        <td>DOAC</td>
                        <td>150mg BID<br><small>Consider 110mg if >80yo</small></td>
                        <td>P-gp inhibitors</td>
                        <td>Avoid if CrCl<30</td>
                        <td>‚ÜëGI bleed vs warfarin</td>
                    </tr>
                    
                    <!-- Antipsychotics -->
                    <tr>
                        <td><strong>Haloperidol</strong></td>
                        <td>Antipsychotic</td>
                        <td>0.25-0.5mg PRN</td>
                        <td>QT-prolonging drugs</td>
                        <td>No adjustment</td>
                        <td><span class="beers-flag">BEERS</span> <span class="acb-score">ACB:1</span></td>
                    </tr>
                    <tr>
                        <td><strong>Quetiapine</strong></td>
                        <td>Antipsychotic</td>
                        <td>12.5-25mg start</td>
                        <td>CYP3A4 inhibitors</td>
                        <td>No adjustment</td>
                        <td><span class="beers-flag">BEERS</span> Sedation++</td>
                    </tr>
                    
                    <!-- Hypnotics -->
                    <tr>
                        <td><strong>Zolpidem</strong></td>
                        <td>Z-drug</td>
                        <td>5mg max</td>
                        <td>CNS depressants</td>
                        <td>No adjustment</td>
                        <td><span class="beers-flag">BEERS</span> Falls++</td>
                    </tr>
                    <tr>
                        <td><strong>Trazodone</strong></td>
                        <td>SARI</td>
                        <td>25mg HS start</td>
                        <td>MAOIs, CYP3A4</td>
                        <td>No adjustment</td>
                        <td><span class="safe-tag">Safer option</span></td>
                    </tr>
                    
                    <!-- Anticholinergics -->
                    <tr>
                        <td><strong>Oxybutynin</strong></td>
                        <td>Anticholinergic</td>
                        <td>Avoid if possible</td>
                        <td>Other anticholinergics</td>
                        <td>Use caution</td>
                        <td><span class="beers-flag">BEERS</span> <span class="acb-score">ACB:3</span></td>
                    </tr>
                    <tr>
                        <td><strong>Tolterodine</strong></td>
                        <td>Anticholinergic</td>
                        <td>2mg daily</td>
                        <td>CYP3A4 inhibitors</td>
                        <td>1mg if CrCl<30</td>
                        <td><span class="acb-score">ACB:2</span> Better than oxy</td>
                    </tr>
                    
                    <!-- SSRIs -->
                    <tr>
                        <td><strong>Sertraline</strong></td>
                        <td>SSRI</td>
                        <td>25mg start</td>
                        <td>NSAIDs (‚Üëbleeding)</td>
                        <td>No adjustment</td>
                        <td><span class="safe-tag">First-line</span></td>
                    </tr>
                    <tr>
                        <td><strong>Citalopram</strong></td>
                        <td>SSRI</td>
                        <td>Max 20mg</td>
                        <td>QT-prolonging drugs</td>
                        <td>No adjustment</td>
                        <td>QT prolongation >20mg</td>
                    </tr>
                    
                    <!-- Opioids -->
                    <tr>
                        <td><strong>Tramadol</strong></td>
                        <td>Opioid</td>
                        <td>25mg start, max 300mg/d</td>
                        <td>SSRIs (serotonin syndrome)</td>
                        <td>‚Üëinterval if CrCl<30</td>
                        <td>Seizure risk</td>
                    </tr>
                    <tr>
                        <td><strong>Morphine</strong></td>
                        <td>Opioid</td>
                        <td>2.5mg q4h start</td>
                        <td>CNS depressants</td>
                        <td>‚Üì50% if CrCl<30</td>
                        <td>Active metabolites accumulate</td>
                    </tr>
                    
                    <!-- Others -->
                    <tr>
                        <td><strong>Metformin</strong></td>
                        <td>Biguanide</td>
                        <td>500mg daily start</td>
                        <td>Contrast dye</td>
                        <td>Avoid if eGFR<30</td>
                        <td><span class="safe-tag">First-line DM</span></td>
                    </tr>
                    <tr>
                        <td><strong>Digoxin</strong></td>
                        <td>Cardiac glycoside</td>
                        <td>Max 0.125mg/d</td>
                        <td>Amiodarone, Verapamil</td>
                        <td>‚Üìdose if CrCl<50</td>
                        <td><span class="beers-flag">BEERS if >0.125mg</span></td>
                    </tr>
                    
                    <!-- Benzodiazepines -->
                    <tr>
                        <td><strong>Lorazepam</strong></td>
                        <td>Benzodiazepine</td>
                        <td>0.5mg max</td>
                        <td>Opioids, alcohol</td>
                        <td>No adjustment</td>
                        <td><span class="beers-flag">BEERS</span> Falls, cognitive decline</td>
                    </tr>
                    <tr>
                        <td><strong>Alprazolam</strong></td>
                        <td>Benzodiazepine</td>
                        <td>Avoid</td>
                        <td>CYP3A4 inhibitors</td>
                        <td>No adjustment</td>
                        <td><span class="beers-flag">BEERS</span> High addiction risk</td>
                    </tr>
                    <tr>
                        <td><strong>Diazepam</strong></td>
                        <td>Benzodiazepine</td>
                        <td>Avoid</td>
                        <td>CNS depressants</td>
                        <td>‚Üìdose in hepatic impairment</td>
                        <td><span class="beers-flag">BEERS</span> Long half-life</td>
                    </tr>
                    
                    <!-- NSAIDs -->
                    <tr>
                        <td><strong>Ibuprofen</strong></td>
                        <td>NSAID</td>
                        <td>200-400mg TID max</td>
                        <td>Warfarin, ACE-I, SSRIs</td>
                        <td>Avoid if CrCl<30</td>
                        <td><span class="beers-flag">BEERS chronic use</span> GI/renal risk</td>
                    </tr>
                    <tr>
                        <td><strong>Naproxen</strong></td>
                        <td>NSAID</td>
                        <td>220mg BID max</td>
                        <td>Anticoagulants, steroids</td>
                        <td>Avoid if CrCl<30</td>
                        <td><span class="beers-flag">BEERS chronic use</span> CV risk</td>
                    </tr>
                    <tr>
                        <td><strong>Celecoxib</strong></td>
                        <td>COX-2 inhibitor</td>
                        <td>100mg daily start</td>
                        <td>Warfarin, fluconazole</td>
                        <td>‚Üìdose if CrCl<30</td>
                        <td>Safer GI profile than NSAIDs</td>
                    </tr>
                    
                    <!-- Antibiotics -->
                    <tr>
                        <td><strong>Ciprofloxacin</strong></td>
                        <td>Fluoroquinolone</td>
                        <td>250-500mg BID</td>
                        <td>Warfarin, QT drugs</td>
                        <td>‚Üì50% if CrCl<30</td>
                        <td><span class="beers-flag">BEERS</span> Tendon rupture, delirium</td>
                    </tr>
                    <tr>
                        <td><strong>Amoxicillin</strong></td>
                        <td>Penicillin</td>
                        <td>250-500mg TID</td>
                        <td>Warfarin, methotrexate</td>
                        <td>‚Üëinterval if CrCl<30</td>
                        <td><span class="safe-tag">Generally safe</span></td>
                    </tr>
                    <tr>
                        <td><strong>Trimethoprim/SMX</strong></td>
                        <td>Sulfonamide</td>
                        <td>1 DS tab BID</td>
                        <td>Warfarin, ACE-I, methotrexate</td>
                        <td>‚Üì50% if CrCl<30</td>
                        <td>Hyperkalemia risk with ACE-I</td>
                    </tr>
                    <tr>
                        <td><strong>Nitrofurantoin</strong></td>
                        <td>Nitrofuran</td>
                        <td>50-100mg QID</td>
                        <td>Antacids</td>
                        <td>Avoid if CrCl<60</td>
                        <td><span class="beers-flag">BEERS if CrCl<30</span> Pulmonary toxicity</td>
                    </tr>
                    
                    <!-- Beta Blockers -->
                    <tr>
                        <td><strong>Metoprolol</strong></td>
                        <td>Beta blocker</td>
                        <td>12.5-25mg BID start</td>
                        <td>Verapamil, diltiazem</td>
                        <td>No adjustment</td>
                        <td><span class="safe-tag">Cardioselective</span></td>
                    </tr>
                    <tr>
                        <td><strong>Atenolol</strong></td>
                        <td>Beta blocker</td>
                        <td>25mg daily start</td>
                        <td>CCBs, clonidine</td>
                        <td>‚Üì50% if CrCl<35</td>
                        <td>Long half-life, renally cleared</td>
                    </tr>
                    <tr>
                        <td><strong>Carvedilol</strong></td>
                        <td>Beta blocker</td>
                        <td>3.125mg BID start</td>
                        <td>CYP2D6 inhibitors</td>
                        <td>No adjustment</td>
                        <td>Alpha blocking activity</td>
                    </tr>
                    
                    <!-- ACE Inhibitors/ARBs -->
                    <tr>
                        <td><strong>Lisinopril</strong></td>
                        <td>ACE inhibitor</td>
                        <td>2.5-5mg daily start</td>
                        <td>K+ supplements, NSAIDs</td>
                        <td>‚Üìdose if CrCl<30</td>
                        <td><span class="safe-tag">First-line HTN</span></td>
                    </tr>
                    <tr>
                        <td><strong>Losartan</strong></td>
                        <td>ARB</td>
                        <td>25mg daily start</td>
                        <td>K+ sparing diuretics</td>
                        <td>No adjustment</td>
                        <td>Less cough than ACE-I</td>
                    </tr>
                    
                    <!-- Diuretics -->
                    <tr>
                        <td><strong>Furosemide</strong></td>
                        <td>Loop diuretic</td>
                        <td>20mg daily start</td>
                        <td>Digoxin, lithium, NSAIDs</td>
                        <td>Higher doses if CrCl<30</td>
                        <td>Monitor K+, volume status</td>
                    </tr>
                    <tr>
                        <td><strong>HCTZ</strong></td>
                        <td>Thiazide</td>
                        <td>12.5mg daily start</td>
                        <td>Lithium, digoxin</td>
                        <td>Ineffective if CrCl<30</td>
                        <td>Hyponatremia risk</td>
                    </tr>
                    <tr>
                        <td><strong>Spironolactone</strong></td>
                        <td>K+ sparing</td>
                        <td>12.5-25mg daily</td>
                        <td>ACE-I, ARBs, K+ supplements</td>
                        <td>Avoid if CrCl<30</td>
                        <td><span class="acb-score">ACB:1</span> Hyperkalemia risk</td>
                    </tr>
                    
                    <!-- PPIs/H2 Blockers -->
                    <tr>
                        <td><strong>Omeprazole</strong></td>
                        <td>PPI</td>
                        <td>20mg daily</td>
                        <td>Clopidogrel, warfarin</td>
                        <td>No adjustment</td>
                        <td>Long-term: fracture, B12 deficiency</td>
                    </tr>
                    <tr>
                        <td><strong>Ranitidine</strong></td>
                        <td>H2 blocker</td>
                        <td>150mg BID</td>
                        <td>Warfarin</td>
                        <td>‚Üì50% if CrCl<50</td>
                        <td><span class="acb-score">ACB:1</span> Confusion risk</td>
                    </tr>
                    
                    <!-- Dementia Drugs -->
                    <tr>
                        <td><strong>Donepezil</strong></td>
                        <td>AChE inhibitor</td>
                        <td>5mg HS start</td>
                        <td>Anticholinergics, BBs</td>
                        <td>No adjustment</td>
                        <td>Bradycardia, syncope risk</td>
                    </tr>
                    <tr>
                        <td><strong>Memantine</strong></td>
                        <td>NMDA antagonist</td>
                        <td>5mg daily start</td>
                        <td>Amantadine, dextromethorphan</td>
                        <td>‚Üìdose if CrCl<30</td>
                        <td>For moderate-severe dementia</td>
                    </tr>
                    
                    <!-- Muscle Relaxants -->
                    <tr>
                        <td><strong>Cyclobenzaprine</strong></td>
                        <td>Muscle relaxant</td>
                        <td>Avoid</td>
                        <td>MAOIs, tramadol</td>
                        <td>Use caution</td>
                        <td><span class="beers-flag">BEERS</span> <span class="acb-score">ACB:2</span></td>
                    </tr>
                    <tr>
                        <td><strong>Baclofen</strong></td>
                        <td>Muscle relaxant</td>
                        <td>5mg TID start</td>
                        <td>CNS depressants</td>
                        <td>‚Üìdose if CrCl<30</td>
                        <td>Withdrawal risk, taper slowly</td>
                    </tr>
                </tbody>
            </table>

            <script>
            // Add search functionality for drug table
            document.getElementById('drugFilter').addEventListener('keyup', function() {
                const filter = this.value.toLowerCase();
                const rows = document.querySelectorAll('#drugTableBody tr');
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(filter) ? '' : 'none';
                });
            });
            </script>

            <!-- Quick Reference Boxes -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
                <div style="background: #fef5e7; padding: 15px; border-radius: 8px; border-left: 4px solid #f39c12;">
                    <h4 class="font-semibold mb-2">üö® Always Check in Elderly:</h4>
                    <ul style="margin: 10px 0;" class="text-sm space-y-1">
                        <li>‚Ä¢ CrCl using Cockcroft-Gault (not eGFR)</li>
                        <li>‚Ä¢ Total anticholinergic burden (ACB score)</li>
                        <li>‚Ä¢ QT-prolonging combinations</li>
                        <li>‚Ä¢ Fall risk medications</li>
                        <li>‚Ä¢ Drug-disease interactions</li>
                    </ul>
                </div>
                
                <div style="background: #ebf8ff; padding: 15px; border-radius: 8px; border-left: 4px solid #3182ce;">
                    <h4 class="font-semibold mb-2">üìã Beers Criteria Top Offenders:</h4>
                    <ul style="margin: 10px 0;" class="text-sm space-y-1">
                        <li><strong>Benzos:</strong> Any use (fall risk)</li>
                        <li><strong>Z-drugs:</strong> >90 days use</li>
                        <li><strong>NSAIDs:</strong> Chronic use if CrCl<30</li>
                        <li><strong>Muscle relaxants:</strong> Avoid all</li>
                        <li><strong>TCAs:</strong> Tertiary amines worst</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- CrCl Calculator -->
        <div class="mt-6 bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-semibold mb-4">üßÆ Cockcroft-Gault CrCl Calculator</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Age (years)</label>
                    <input type="number" id="crcl-age" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="65-100">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Weight (kg)</label>
                    <input type="number" id="crcl-weight" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="50-100">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Serum Cr (mg/dL)</label>
                    <input type="number" step="0.1" id="crcl-cr" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="0.5-3.0">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Sex</label>
                    <select id="crcl-sex" class="w-full p-2 border border-gray-300 rounded-lg">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
            </div>
            <button onclick="calculateCrCl()" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                Calculate CrCl
            </button>
            
            <div id="crcl-result" class="mt-4 p-4 bg-gray-50 rounded-lg hidden">
                <h3 class="font-semibold text-lg mb-2">Result:</h3>
                <p class="text-2xl font-bold text-blue-600" id="crcl-value"></p>
                <p class="text-sm text-gray-600 mt-2" id="crcl-interpretation"></p>
                <div class="mt-3 p-3 bg-yellow-50 rounded">
                    <p class="text-sm font-semibold text-yellow-800">Dosing Implications:</p>
                    <ul class="text-sm text-yellow-700 mt-1" id="crcl-dosing"></ul>
                </div>
            </div>
        </div>

        <!-- External Resources -->
        <div class="mt-6 bg-white rounded-lg shadow p-6">
            <h2 class="text-xl font-semibold mb-4">üîó External Drug Resources</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <a href="https://reference.medscape.com/drug-interactionchecker" target="_blank" 
                   class="p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg hover:from-blue-100 hover:to-blue-200 transition">
                    <h3 class="font-semibold text-blue-900 mb-2">Medscape Drug Checker</h3>
                    <p class="text-sm text-blue-700">Comprehensive interaction database with clinical details</p>
                </a>
                <a href="https://www.drugs.com/drug_interactions.html" target="_blank"
                   class="p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg hover:from-green-100 hover:to-green-200 transition">
                    <h3 class="font-semibold text-green-900 mb-2">Drugs.com Checker</h3>
                    <p class="text-sm text-green-700">User-friendly interface with severity ratings</p>
                </a>
                <a href="https://www.uptodate.com/drug-interactions" target="_blank"
                   class="p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg hover:from-purple-100 hover:to-purple-200 transition">
                    <h3 class="font-semibold text-purple-900 mb-2">UpToDate Lexicomp</h3>
                    <p class="text-sm text-purple-700">Evidence-based with detailed pharmacology</p>
                </a>
            </div>
            
            <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">üì± Mobile Apps for Point-of-Care:</h4>
                <ul class="text-sm text-blue-800 space-y-1">
                    <li>‚Ä¢ <strong>Epocrates:</strong> Free drug interaction checker with formulary info</li>
                    <li>‚Ä¢ <strong>Micromedex:</strong> Hospital-grade drug information</li>
                    <li>‚Ä¢ <strong>Lexicomp:</strong> Comprehensive with geriatric dosing</li>
                    <li>‚Ä¢ <strong>AGS Beers Criteria:</strong> Official app for inappropriate medications</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Common medications database
        const commonDrugs = [
            'Warfarin', 'Apixaban', 'Rivaroxaban', 'Aspirin', 'Clopidogrel',
            'Metoprolol', 'Atenolol', 'Carvedilol', 'Bisoprolol',
            'Lisinopril', 'Enalapril', 'Ramipril', 'Losartan', 'Valsartan',
            'Amlodipine', 'Diltiazem', 'Verapamil',
            'Furosemide', 'Hydrochlorothiazide', 'Spironolactone',
            'Atorvastatin', 'Simvastatin', 'Rosuvastatin',
            'Metformin', 'Glipizide', 'Insulin',
            'Levothyroxine', 'Omeprazole', 'Pantoprazole',
            'Sertraline', 'Escitalopram', 'Mirtazapine',
            'Gabapentin', 'Pregabalin', 'Acetaminophen',
            'Tramadol', 'Oxycodone', 'Morphine',
            'Donepezil', 'Memantine', 'Rivastigmine',
            'Allopurinol', 'Colchicine', 'Prednisone',
            'Amiodarone', 'Digoxin', 'Tamsulosin'
        ];

        // Known interactions database (simplified)
        const interactions = {
            'Warfarin': {
                'Aspirin': { severity: 'severe', description: 'Significantly increased bleeding risk' },
                'NSAIDs': { severity: 'severe', description: 'Increased bleeding risk' },
                'Amiodarone': { severity: 'moderate', description: 'Increased INR, requires dose adjustment' },
                'Simvastatin': { severity: 'minor', description: 'Possible increased INR' }
            },
            'ACE Inhibitors': {
                'Spironolactone': { severity: 'moderate', description: 'Risk of hyperkalemia' },
                'NSAIDs': { severity: 'moderate', description: 'Reduced antihypertensive effect, renal impairment' }
            },
            'Digoxin': {
                'Amiodarone': { severity: 'severe', description: 'Digoxin toxicity, reduce digoxin dose by 50%' },
                'Verapamil': { severity: 'moderate', description: 'Increased digoxin levels' },
                'Furosemide': { severity: 'moderate', description: 'Hypokalemia increases digoxin toxicity risk' }
            },
            'Statins': {
                'Fibrates': { severity: 'moderate', description: 'Increased risk of myopathy' },
                'Amiodarone': { severity: 'moderate', description: 'Increased statin levels, myopathy risk' }
            }
        };

        let selectedMedications = [];

        function searchDrugs(event) {
            const searchTerm = event.target.value.toLowerCase();
            const resultsDiv = document.getElementById('searchResults');
            
            if (searchTerm.length < 2) {
                resultsDiv.innerHTML = '';
                return;
            }

            const matches = commonDrugs.filter(drug => 
                drug.toLowerCase().includes(searchTerm)
            ).slice(0, 5);

            if (matches.length > 0) {
                resultsDiv.innerHTML = matches.map(drug => `
                    <div onclick="selectDrug('${drug}')" 
                         class="p-2 hover:bg-gray-100 cursor-pointer rounded">
                        ${drug}
                    </div>
                `).join('');
            } else {
                resultsDiv.innerHTML = '<p class="p-2 text-gray-500">No matches found</p>';
            }
        }

        function selectDrug(drugName) {
            if (!selectedMedications.includes(drugName)) {
                selectedMedications.push(drugName);
                updateMedicationList();
            }
            document.getElementById('drugSearch').value = '';
            document.getElementById('searchResults').innerHTML = '';
        }

        function addCustomDrug() {
            const input = document.getElementById('drugSearch');
            const drugName = input.value.trim();
            
            if (drugName && !selectedMedications.includes(drugName)) {
                selectedMedications.push(drugName);
                updateMedicationList();
                input.value = '';
                document.getElementById('searchResults').innerHTML = '';
            }
        }

        function removeDrug(index) {
            selectedMedications.splice(index, 1);
            updateMedicationList();
            if (selectedMedications.length === 0) {
                document.getElementById('interactionResults').innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <div class="text-5xl mb-3">üî¨</div>
                        <p>Add medications and click "Check Interactions" to see results</p>
                    </div>
                `;
            }
        }

        function updateMedicationList() {
            const listDiv = document.getElementById('medicationList');
            
            if (selectedMedications.length === 0) {
                listDiv.innerHTML = '<p class="text-gray-500 text-sm">No medications added yet</p>';
            } else {
                listDiv.innerHTML = selectedMedications.map((drug, index) => `
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                        <span>${index + 1}. ${drug}</span>
                        <button onclick="removeDrug(${index})" 
                                class="text-red-500 hover:text-red-700">
                            ‚úï
                        </button>
                    </div>
                `).join('');
            }
        }

        function checkInteractions() {
            if (selectedMedications.length < 2) {
                alert('Please add at least 2 medications to check for interactions');
                return;
            }

            const resultsDiv = document.getElementById('interactionResults');
            let foundInteractions = [];

            // Simplified interaction checking
            for (let i = 0; i < selectedMedications.length; i++) {
                for (let j = i + 1; j < selectedMedications.length; j++) {
                    const drug1 = selectedMedications[i];
                    const drug2 = selectedMedications[j];
                    
                    // Check specific interactions
                    if (drug1 === 'Warfarin' && drug2 === 'Aspirin') {
                        foundInteractions.push({
                            drugs: [drug1, drug2],
                            severity: 'severe',
                            description: 'Significantly increased bleeding risk. Consider alternative antiplatelet or careful monitoring.'
                        });
                    } else if (drug1.includes('pril') && drug2 === 'Spironolactone') {
                        foundInteractions.push({
                            drugs: [drug1, drug2],
                            severity: 'moderate',
                            description: 'Risk of hyperkalemia. Monitor potassium levels closely.'
                        });
                    } else if ((drug1 === 'Digoxin' && drug2 === 'Amiodarone') || 
                               (drug2 === 'Digoxin' && drug1 === 'Amiodarone')) {
                        foundInteractions.push({
                            drugs: [drug1, drug2],
                            severity: 'severe',
                            description: 'Risk of digoxin toxicity. Reduce digoxin dose by 50%.'
                        });
                    } else if (drug1.includes('statin') && drug2 === 'Amiodarone') {
                        foundInteractions.push({
                            drugs: [drug1, drug2],
                            severity: 'moderate',
                            description: 'Increased statin levels. Monitor for myopathy.'
                        });
                    }
                }
            }

            // Display results
            if (foundInteractions.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="p-4 bg-green-50 rounded-lg">
                        <div class="flex items-center mb-2">
                            <span class="text-3xl mr-3">‚úÖ</span>
                            <h3 class="font-semibold text-green-900">No Major Interactions Found</h3>
                        </div>
                        <p class="text-green-700">No significant interactions detected among the ${selectedMedications.length} medications.</p>
                        <p class="text-sm text-green-600 mt-2">Remember to consider patient-specific factors and verify with clinical references.</p>
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = `
                    <div class="mb-4">
                        <h3 class="font-semibold text-lg mb-2">Found ${foundInteractions.length} Interaction(s)</h3>
                    </div>
                    ${foundInteractions.map(interaction => `
                        <div class="mb-3 p-4 rounded-lg ${
                            interaction.severity === 'severe' ? 'interaction-severe' : 
                            interaction.severity === 'moderate' ? 'interaction-moderate' : 
                            'interaction-minor'
                        }">
                            <div class="flex items-start">
                                <span class="text-2xl mr-3">${
                                    interaction.severity === 'severe' ? 'üî¥' : 
                                    interaction.severity === 'moderate' ? 'üü°' : 'üîµ'
                                }</span>
                                <div class="flex-1">
                                    <div class="font-semibold">
                                        ${interaction.drugs.join(' + ')}
                                    </div>
                                    <div class="text-sm mt-1">
                                        Severity: <span class="font-medium uppercase">${interaction.severity}</span>
                                    </div>
                                    <div class="text-sm mt-2">
                                        ${interaction.description}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                    
                    <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                        <h4 class="font-semibold text-blue-900 mb-1">üí° Clinical Recommendations:</h4>
                        <ul class="text-sm text-blue-800 space-y-1">
                            <li>‚Ä¢ Review medication necessity</li>
                            <li>‚Ä¢ Consider alternative agents</li>
                            <li>‚Ä¢ Adjust doses if appropriate</li>
                            <li>‚Ä¢ Monitor for adverse effects</li>
                            <li>‚Ä¢ Document in patient record</li>
                        </ul>
                    </div>
                `;
            }

            // Add geriatric-specific considerations
            resultsDiv.innerHTML += `
                <div class="mt-4 p-3 bg-purple-50 rounded-lg">
                    <h4 class="font-semibold text-purple-900 mb-1">üë¥ Geriatric Considerations:</h4>
                    <ul class="text-sm text-purple-800 space-y-1">
                        <li>‚Ä¢ Reduced renal/hepatic clearance</li>
                        <li>‚Ä¢ Increased sensitivity to medications</li>
                        <li>‚Ä¢ Higher risk of adverse effects</li>
                        <li>‚Ä¢ Consider "Start low, go slow"</li>
                    </ul>
                </div>
            `;
        }

        // CrCl Calculator Function
        function calculateCrCl() {
            const age = parseFloat(document.getElementById('crcl-age').value);
            const weight = parseFloat(document.getElementById('crcl-weight').value);
            const cr = parseFloat(document.getElementById('crcl-cr').value);
            const sex = document.getElementById('crcl-sex').value;
            
            if (!age || !weight || !cr) {
                alert('Please fill in all fields');
                return;
            }
            
            // Cockcroft-Gault formula: CrCl = [(140-age) √ó weight √ó (0.85 if female)] / (72 √ó Cr)
            let crcl = ((140 - age) * weight) / (72 * cr);
            if (sex === 'female') {
                crcl *= 0.85;
            }
            
            // Round to 1 decimal place
            crcl = Math.round(crcl * 10) / 10;
            
            // Display result
            const resultDiv = document.getElementById('crcl-result');
            const valueEl = document.getElementById('crcl-value');
            const interpretEl = document.getElementById('crcl-interpretation');
            const dosingEl = document.getElementById('crcl-dosing');
            
            resultDiv.classList.remove('hidden');
            valueEl.textContent = crcl + ' mL/min';
            
            // Interpretation based on CrCl
            let interpretation = '';
            let dosingPoints = [];
            
            if (crcl >= 90) {
                interpretation = 'Normal renal function';
                dosingPoints = [
                    '‚Ä¢ Standard dosing for most medications',
                    '‚Ä¢ Monitor for age-related sensitivity'
                ];
            } else if (crcl >= 60) {
                interpretation = 'Mild renal impairment (Stage 2 CKD)';
                dosingPoints = [
                    '‚Ä¢ Most medications: standard dosing',
                    '‚Ä¢ NSAIDs: use with caution',
                    '‚Ä¢ Metformin: safe if eGFR >45'
                ];
            } else if (crcl >= 30) {
                interpretation = 'Moderate renal impairment (Stage 3 CKD)';
                dosingPoints = [
                    '‚Ä¢ DOACs: dose reduction needed',
                    '‚Ä¢ Gabapentin/Pregabalin: reduce dose',
                    '‚Ä¢ Avoid NSAIDs if possible',
                    '‚Ä¢ Many antibiotics need adjustment',
                    '‚Ä¢ Metformin: avoid if <30'
                ];
            } else if (crcl >= 15) {
                interpretation = 'Severe renal impairment (Stage 4 CKD)';
                dosingPoints = [
                    '‚Ä¢ Most drugs need significant dose reduction',
                    '‚Ä¢ Avoid: Dabigatran, NSAIDs, Metformin',
                    '‚Ä¢ Morphine: reduce dose by 50%',
                    '‚Ä¢ Consider nephrology consultation'
                ];
            } else {
                interpretation = 'Kidney failure (Stage 5 CKD)';
                dosingPoints = [
                    '‚Ä¢ Requires careful medication review',
                    '‚Ä¢ Many drugs contraindicated',
                    '‚Ä¢ Dialysis considerations for drug dosing',
                    '‚Ä¢ Nephrology consultation essential'
                ];
            }
            
            interpretEl.textContent = interpretation;
            dosingEl.innerHTML = dosingPoints.join('\n');
            
            // Scroll to result
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
    
    <!-- 100% privacy-first analytics -->
    <script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
</body>
</html>